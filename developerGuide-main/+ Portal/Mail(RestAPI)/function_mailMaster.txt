    function mailMaster(act){
        var action = act; // login: 로그인, count : 메일 안읽음(unseenMails), external-count : 메일 안읽음(unseenMails),전체 메일갯수(totalMails) password : 패스워드변경
        var mailId = '<%= strUserSpecId %>';
// 		var mailId = 'jmsong';
        var mailType = 'unseen'; // action='login' 시 안읽음 메일 리스트 바로 가는링크 시 사용
        var password = '12341234'; // action='password' 경우시 변수사용
        var strPublicKey = '30820122300d06092a864886f70d01010105000382010f003082010a0282010100968c1bd96e9d533dde1fbf901deae76c7ac277eaf6d364bf7f99246abe5a264bc9b484599b7b055a782adb1aed456b45f04bb44a7b45ee23ac812d08c2bc9dfe646db1c540d6ff440dd92205bcf613885c632a897472519831daecb368eabc1f58b7be3d7517e1dc460e92876ca8c67cb650f8f77aa638a96e1aed4eeb1f804c1d4333f3e89e6bf99263a76ad0a419f7738bee391149e0ccdeba5844572c308b808281bb470c13ff5d8f7699003aa53fe613c5c24b324e32b95399cc4a104a5aa925ac8d0e57fb10ca7e6abf197f50cfa56f3e33a294efe16552e3d8289144aeb296a0dfc40c055b64d37a2989b1065abbdd65b35989cb320451f7c3b4102d5f0203010001';


        //data.RSAPublicKey 값을 통해 포탈 서버에서 ecrypt를 해서 encryptCn 값을 만들어야함 RSA_API.zip에 test소스를 통해 ecrypt 하는법 참조
        $.ajax({
            type : "POST",
            data: {
                cn : 'publickeyEncrypt',
                publickey : strPublicKey,
                action : action,
                mailId : mailId,
                type : mailType,
                password : password
            },
            dataType : "jsonp",
            /* url : '포탈 publickey를 이용한 인크립트 값 받아오는 url?publickey=' + data.RSAPublicKey +'&action='action, */
            url : '/RasEncoderServlet',
            jsonpCallback : "callback",
            success : function(portalData) {
                var encryptCn = portalData.hexString;/* rsa.encrypt(cn); *///portal 서버에서 내려주는 encryptCn으로 대체
                if (encryptCn){
                    //debugger;
                    if(action=='login') {
                        window.open('https://mail.kised.or.kr/mail/sso?cn=' + encryptCn);
                    } else if (action=='password') {
                        $.ajax({
                            type : "POST",
                            data: {
                                cn : encryptCn
                            },
                            dataType : "jsonp",
                            url : 'https://mail.kised.or.kr/mail/sso',
                            jsonpCallback : "callback",
                            success : function(data) {
                                if(data.result == 'success') {
                                    alert("웹메일 비밀번호 변경 성공");
                                } else {
                                    alert("웹메일 비밀번호 변경 실패 : " + data.result);
                                }
                            },
                            error: function(request, status, error) {
                                alert("action : password \n code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
                            }
                        });
                    } else if(action=='count'){
                        $.ajax({
                            type : "POST",
                            data: {
                                cn : encryptCn
                            },
                            dataType : "jsonp",
                            /* url : '포탈 publickey를 이용한 인크립트 값 받아오는 url?publickey=' + data.RSAPublicKey +'&action='action, */
                            url : 'https://mail.kised.or.kr/mail/sso',
                            jsonpCallback : "callback",
                            success : function(data) {
                                //$("#totalMailCnt a").html("받은메일 <span>" + data.totalMails + "</span>");


                                inMailCnt =  data.unseenMails ;

                                mailMaster('external-count');
                            },
                            error: function(request, status, error) {
                                //alert("action : count \n code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
                            }
                        });
                    } else if(action=='external-count'){
                        $.ajax({
                            type : "POST",
                            data: {
                                cn : encryptCn
                            },
                            dataType : "jsonp",
                            /* url : '포탈 publickey를 이용한 인크립트 값 받아오는 url?publickey=' + data.RSAPublicKey +'&action='action, */
                            url : 'https://mail.kised.or.kr/mail/sso',
                            jsonpCallback : "callback",
                            success : function(data) {
                                //$("#totalMailCnt a").html("받은메일 <span>" + data.totalMails + "</span>");
                                $("#unseenMailCnt a").html("안읽은메일(업무망) <span>" + inMailCnt + "</span>");
                                $("#unseenMailOutCnt").html("안읽은메일(인터넷망) <span>" + data.unseenMails + "</span>");
                            },
                            error: function(request, status, error) {
                                //alert("action : count \n code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
                            }
                        });
                    }
                }
            },
            error: function(request, status, error) {
                //alert("RasEncoderServlet \n code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
            }
        });
    }